<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>数据库的自动备份与上传</title>
      <link href="/2024/06/24/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E8%87%AA%E5%8A%A8%E5%A4%87%E4%BB%BD%E4%B8%8E%E4%B8%8A%E4%BC%A0/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E8%87%AA%E5%8A%A8%E5%A4%87%E4%BB%BD%E4%B8%8E%E4%B8%8A%E4%BC%A0/"/>
      <url>/2024/06/24/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E8%87%AA%E5%8A%A8%E5%A4%87%E4%BB%BD%E4%B8%8E%E4%B8%8A%E4%BC%A0/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E8%87%AA%E5%8A%A8%E5%A4%87%E4%BB%BD%E4%B8%8E%E4%B8%8A%E4%BC%A0/</url>
      
        <content type="html"><![CDATA[<h1 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h1><h2 id="下载wget服务"><a href="#下载wget服务" class="headerlink" title="下载wget服务"></a>下载wget服务</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install wget</span><br></pre></td></tr></table></figure><h2 id="下载xtrabackup"><a href="#下载xtrabackup" class="headerlink" title="下载xtrabackup"></a>下载xtrabackup</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://downloads.percona.com/downloads/Percona-XtraBackup-8.0/Percona-XtraBackup-8.0.35-30/binary/redhat/7/x86_64/percona-xtrabackup-80-8.0.35-30.1.el7.x86_64.rpm</span><br></pre></td></tr></table></figure><h2 id="安装xtrabackup服务"><a href="#安装xtrabackup服务" class="headerlink" title="安装xtrabackup服务"></a>安装xtrabackup服务</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">yum -y install cmake gcc gcc-c++ libaio libaio-devel automake autoconf bzr</span><br><span class="line">yum -y install perl perl-devel libaio libaio-devel perl-Time-HiRes perl-Digest-MD5</span><br><span class="line">yum -y install libev rsync</span><br><span class="line">yum -y install epel-release</span><br><span class="line">yum -y install zstd</span><br><span class="line">yum  -y install perl-DBD-MySQL</span><br><span class="line">rpm -ivh percona-xtrabackup-80-8.0.35-30.1.el7.x86_64.rpm</span><br></pre></td></tr></table></figure><h1 id="自动备份到网盘准备"><a href="#自动备份到网盘准备" class="headerlink" title="自动备份到网盘准备"></a>自动备份到网盘准备</h1><h2 id="安装-pip"><a href="#安装-pip" class="headerlink" title="安装 pip"></a>安装 pip</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl https://bootstrap.pypa.io/pip/2.7/get-pip.py -o get-pip27.py</span><br></pre></td></tr></table></figure><h2 id="安装bypy，requests包"><a href="#安装bypy，requests包" class="headerlink" title="安装bypy，requests包"></a>安装bypy，requests包</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip install bypy</span><br><span class="line">pip install requests</span><br></pre></td></tr></table></figure><h2 id="授权百度登录"><a href="#授权百度登录" class="headerlink" title="授权百度登录"></a>授权百度登录</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">访问链接，登录网盘后复制授权码授权。</span><br><span class="line">bypy info</span><br></pre></td></tr></table></figure><h1 id="创建脚本并让他自动备份"><a href="#创建脚本并让他自动备份" class="headerlink" title="创建脚本并让他自动备份"></a>创建脚本并让他自动备份</h1><h2 id="创建备份脚本"><a href="#创建备份脚本" class="headerlink" title="创建备份脚本"></a>创建备份脚本</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">创建目录</span></span><br><span class="line">mkdir -p /home/user/</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">创建mysql备份脚本</span></span><br><span class="line">touch /home/user/backup_mysql_full.sh</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">给予可执行权限</span></span><br><span class="line">chmod +x /home/user/backup_mysql_full.sh</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">进入MySQL进行用户授权</span></span><br><span class="line">grant BACKUP_ADMIN on *.* to &#x27;root&#x27;@&#x27;%&#x27;;</span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure><h2 id="编写全备脚本"><a href="#编写全备脚本" class="headerlink" title="编写全备脚本"></a>编写全备脚本</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">//进入vi编辑器</span><br><span class="line">vi /home/user/backup_mysql_full.sh</span><br><span class="line">//脚本命令</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line">backup_date=$(date +&quot;%Y-%m-%d&quot;)</span><br><span class="line">backup_dir=&quot;/home/user/backup/mysql&quot;</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">判断备份目录是否存在，如果不存在则创建</span></span><br><span class="line">if [ ! -d &quot;$backup_dir&quot; ]; then</span><br><span class="line">mkdir -p $backup_dir</span><br><span class="line">fi</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">执行备份操作，将指定文件夹下的文件复制到备份目录（127.0.0.1改为实际数据库IP）</span></span><br><span class="line">xtrabackup --backup -u root -H 127.0.0.1 -P3306 -p&#x27;123456&#x27; --target-dir=$backup_dir/mysql_$backup_date 2&gt;/tmp/xtrabackup.log</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">压缩备份文件，并将压缩文件存储到备份目录</span></span><br><span class="line">tar -czvf $backup_dir/mysql_$backup_date.tar.gz $backup_dir/mysql_$backup_date</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">记录备份日志，包括备份日期、备份文件名、备份文件大小等信息</span></span><br><span class="line">backup_size=$(du -h $backup_dir/mysql_$backup_date.tar.gz | awk &#x27;&#123;print$1&#125;&#x27;)</span><br><span class="line">echo &quot;$backup_date Backup Completed: mysql_$backup_date.tar.gz ($backup_size)&quot; &gt;&gt; $backup_dir/backup_m.log</span><br></pre></td></tr></table></figure><h2 id="创建定时任务"><a href="#创建定时任务" class="headerlink" title="创建定时任务"></a>创建定时任务</h2> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">crontab -e</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">格式：分 时 日 月 周</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">每周一凌晨2点执行</span></span><br><span class="line">0 2 * * 1 /home/user/backup_mysql_full.sh</span><br></pre></td></tr></table></figure><h2 id="实现异地备份"><a href="#实现异地备份" class="headerlink" title="实现异地备份"></a>实现异地备份</h2> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 进入定时上传脚本</span><br><span class="line">cd /home/user</span><br><span class="line">touch mysql_to_baidu.sh</span><br><span class="line">vim mysql_to_baidu.sh</span><br></pre></td></tr></table></figure><h2 id="编写异地备份脚本"><a href="#编写异地备份脚本" class="headerlink" title="编写异地备份脚本"></a>编写异地备份脚本</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/sh</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">设置日志文件路径</span></span><br><span class="line">log_file=&quot;/var/log/backup_script.log&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">引入环境变量</span></span><br><span class="line">. /etc/profile</span><br><span class="line">. ~/.bash_profile</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">获取当前日期</span></span><br><span class="line">backup_date=$(date +&quot;%Y-%m-%d&quot;)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">备份目录</span></span><br><span class="line">backup_dir=&quot;/home/user/backup/mysql&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">检查备份目录是否存在</span></span><br><span class="line">if [ ! -d &quot;$backup_dir&quot; ]; then</span><br><span class="line">    echo &quot;备份目录不存在: $backup_dir&quot; &gt;&gt; &quot;$log_file&quot;</span><br><span class="line">    exit 1</span><br><span class="line">fi</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">上传的压缩文件</span></span><br><span class="line">if /usr/bin/bypy upload &quot;$backup_dir/mysql_$backup_date.tar.gz&quot; /backup &gt;&gt; &quot;$log_file&quot; 2&gt;&amp;1; then</span><br><span class="line">    echo &quot;上传成功: $backup_dir/mysql_$backup_date.tar.gz&quot; &gt;&gt; &quot;$log_file&quot;</span><br><span class="line">else</span><br><span class="line">    echo &quot;上传失败: $backup_dir/mysql_$backup_date.tar.gz&quot; &gt;&gt; &quot;$log_file&quot;</span><br><span class="line">fi</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">删除7天前生成的压缩包</span></span><br><span class="line">if find &quot;$backup_dir&quot; -name &quot;*.tar.gz&quot; -mtime +7 -exec rm &#123;&#125; \; &gt;&gt; &quot;$log_file&quot; 2&gt;&amp;1; then</span><br><span class="line">    echo &quot;删除旧备份文件成功&quot; &gt;&gt; &quot;$log_file&quot;</span><br><span class="line">else</span><br><span class="line">    echo &quot;删除旧备份文件失败&quot; &gt;&gt; &quot;$log_file&quot;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure><h2 id="配置定时任务"><a href="#配置定时任务" class="headerlink" title="配置定时任务"></a>配置定时任务</h2> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">crontab -e</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">格式：分 时 日 月 周</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">每周一凌晨4点执行</span></span><br><span class="line">0 4 * * 1 /home/user/mysql_to_baidu.sh</span><br></pre></td></tr></table></figure><div class="note success simple"><p>本文未经允许禁止转载,可提供参考，如需源码请移至关于页。</p></div><div class="note warning simple"><p>本文作者：Acknowledging<br>原文地址：<a href="https://qjwbkk.top">https://qjwbkk.top</a></p></div>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>安装Mysql</title>
      <link href="/2024/06/24/%E5%AE%89%E8%A3%85Mysql-0/%E5%AE%89%E8%A3%85Mysql-0/"/>
      <url>/2024/06/24/%E5%AE%89%E8%A3%85Mysql-0/%E5%AE%89%E8%A3%85Mysql-0/</url>
      
        <content type="html"><![CDATA[<h1 id="安装Mysql"><a href="#安装Mysql" class="headerlink" title="安装Mysql"></a>安装Mysql</h1><h2 id="检查是否已安装其他数据库版本"><a href="#检查是否已安装其他数据库版本" class="headerlink" title="检查是否已安装其他数据库版本"></a>检查是否已安装其他数据库版本</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -qa | grep mariadb</span><br></pre></td></tr></table></figure><h2 id="卸载已安装数据库"><a href="#卸载已安装数据库" class="headerlink" title="卸载已安装数据库"></a>卸载已安装数据库</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum remove mariadb-libs</span><br></pre></td></tr></table></figure><h2 id="安装Mysql8-x版本-yum库"><a href="#安装Mysql8-x版本-yum库" class="headerlink" title="安装Mysql8.x版本 yum库"></a>安装Mysql8.x版本 yum库</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -ivh http://repo.mysql.com/mysql80-community-release-el7-9.noarch.rpm </span><br></pre></td></tr></table></figure><h2 id="Mysql更新密钥，如若密钥过期，则改为最新的"><a href="#Mysql更新密钥，如若密钥过期，则改为最新的" class="headerlink" title="Mysql更新密钥，如若密钥过期，则改为最新的"></a>Mysql更新密钥，如若密钥过期，则改为最新的</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm --import https://repo.mysql.com/RPM-GPG-KEY-mysql-2023</span><br></pre></td></tr></table></figure><h2 id="如果因为一些原因一直无法导入，可直接创建一个文件，本地进行导入（网址看更新密钥的网址）"><a href="#如果因为一些原因一直无法导入，可直接创建一个文件，本地进行导入（网址看更新密钥的网址）" class="headerlink" title="如果因为一些原因一直无法导入，可直接创建一个文件，本地进行导入（网址看更新密钥的网址）"></a>如果因为一些原因一直无法导入，可直接创建一个文件，本地进行导入（网址看更新密钥的网址）</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//创建密钥文件</span><br><span class="line">touch  RPM-GPG-KEY-mysql-2023 （RPM-GPG-KEY-mysql-2023是文件名，下述一样）</span><br><span class="line">//通过vi编辑器进入密钥文件</span><br><span class="line">vi  RPM-GPG-KEY-mysql-2023</span><br><span class="line">//本地进行导入密钥文件</span><br><span class="line">rpm --import  RPM-GPG-KEY-mysql-2023</span><br></pre></td></tr></table></figure><h2 id="下面提供2023年的Mysql密钥"><a href="#下面提供2023年的Mysql密钥" class="headerlink" title="下面提供2023年的Mysql密钥"></a>下面提供2023年的Mysql密钥</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">-----BEGIN PGP PUBLIC KEY BLOCK-----</span><br><span class="line"></span><br><span class="line">mQINBGU2rNoBEACSi5t0nL6/Hj3d0PwsbdnbY+SqLUIZ3uWZQm6tsNhvTnahvPPZ</span><br><span class="line">BGdl99iWYTt2KmXp0KeN2s9pmLKkGAbacQP1RqzMFnoHawSMf0qTUVjAvhnI4+qz</span><br><span class="line">MDjTNSBq9fa3nHmOYxownnrRkpiQUM/yD7/JmVENgwWb6akZeGYrXch9jd4XV3t8</span><br><span class="line">OD6TGzTedTki0TDNr6YZYhC7jUm9fK9Zs299pzOXSxRRNGd+3H9gbXizrBu4L/3l</span><br><span class="line">UrNf//rM7OvV9Ho7u9YYyAQ3L3+OABK9FKHNhrpi8Q0cbhvWkD4oCKJ+YZ54XrOG</span><br><span class="line">0YTg/YUAs5/3//FATI1sWdtLjJ5pSb0onV3LIbarRTN8lC4Le/5kd3lcot9J8b3E</span><br><span class="line">MXL5p9OGW7wBfmNVRSUI74Vmwt+v9gyp0Hd0keRCUn8lo/1V0YD9i92KsE+/IqoY</span><br><span class="line">Tjnya/5kX41jB8vr1ebkHFuJ404+G6ETd0owwxq64jLIcsp/GBZHGU0RKKAo9DRL</span><br><span class="line">H7rpQ7PVlnw8TDNlOtWt5EJlBXFcPL+NgWbqkADAyA/XSNeWlqonvPlYfmasnAHA</span><br><span class="line">pMd9NhPQhC7hJTjCiAwG8UyWpV8Dj07DHFQ5xBbkTnKH2OrJtguPqSNYtTASbsWz</span><br><span class="line">09S8ujoTDXFT17NbFM2dMIiq0a4VQB3SzH13H2io9Cbg/TzJrJGmwgoXgwARAQAB</span><br><span class="line">tDZNeVNRTCBSZWxlYXNlIEVuZ2luZWVyaW5nIDxteXNxbC1idWlsZEBvc3Mub3Jh</span><br><span class="line">Y2xlLmNvbT6JAlQEEwEIAD4WIQS8pDQXw7SF3RKOxtS3s7eIqNN4XAUCZTas2gIb</span><br><span class="line">AwUJA8JnAAULCQgHAgYVCgkICwIEFgIDAQIeAQIXgAAKCRC3s7eIqNN4XLzoD/9P</span><br><span class="line">lpWtfHlI8eQTHwGsGIwFA+fgipyDElapHw3MO+K9VOEYRZCZSuBXHJe9kjGEVCGU</span><br><span class="line">DrfImvgTuNuqYmVUV+wyhP+w46W/cWVkqZKAW0hNp0TTvu3eDwap7gdk80VF24Y2</span><br><span class="line">Wo0bbiGkpPiPmB59oybGKaJ756JlKXIL4hTtK3/hjIPFnb64Ewe4YLZyoJu0fQOy</span><br><span class="line">A8gXuBoalHhUQTbRpXI0XI3tpZiQemNbfBfJqXo6LP3/LgChAuOfHIQ8alvnhCwx</span><br><span class="line">hNUSYGIRqx+BEbJw1X99Az8XvGcZ36VOQAZztkW7mEfH9NDPz7MXwoEvduc61xwl</span><br><span class="line">MvEsUIaSfn6SGLFzWPClA98UMSJgF6sKb+JNoNbzKaZ8V5w13msLb/pq7hab72HH</span><br><span class="line">99XJbyKNliYj3+KA3q0YLf+Hgt4Y4EhIJ8x2+g690Np7zJF4KXNFbi1BGloLGm78</span><br><span class="line">akY1rQlzpndKSpZq5KWw8FY/1PEXORezg/BPD3Etp0AVKff4YdrDlOkNB7zoHRfF</span><br><span class="line">HAvEuuqti8aMBrbRnRSG0xunMUOEhbYS/wOOTl0g3bF9NpAkfU1Fun57N96Us2T9</span><br><span class="line">gKo9AiOY5DxMe+IrBg4zaydEOovgqNi2wbU0MOBQb23Puhj7ZCIXcpILvcx9ygjk</span><br><span class="line">ONr75w+XQrFDNeux4Znzay3ibXtAPqEykPMZHsZ2sbkCDQRlNqzaARAAsdvBo8WR</span><br><span class="line">qZ5WVVk6lReD8b6Zx83eJUkV254YX9zn5t8KDRjYOySwS75mJIaZLsv0YQjJk+5r</span><br><span class="line">t10tejyCrJIFo9CMvCmjUKtVbgmhfS5+fUDRrYCEZBBSa0Dvn68EBLiHugr+SPXF</span><br><span class="line">6o1hXEUqdMCpB6oVp6X45JVQroCKIH5vsCtw2jU8S2/IjjV0V+E/zitGCiZaoZ1f</span><br><span class="line">6NG7ozyFep1CSAReZu/sssk0pCLlfCebRd9Rz3QjSrQhWYuJa+eJmiF4oahnpUGk</span><br><span class="line">txMD632I9aG+IMfjtNJNtX32MbO+Se+cCtVc3cxSa/pR+89a3cb9IBA5tFF2Qoek</span><br><span class="line">hqo/1mmLi93Xn6uDUhl5tVxTnB217dBT27tw+p0hjd9hXZRQbrIZUTyh3+8EMfmA</span><br><span class="line">jNSIeR+th86xRd9XFRr9EOqrydnALOUr9cT7TfXWGEkFvn6ljQX7f4RvjJOTbc4j</span><br><span class="line">JgVFyu8K+VU6u1NnFJgDiNGsWvnYxAf7gDDbUSXEuC2anhWvxPvpLGmsspngge4y</span><br><span class="line">l+3nv+UqZ9sm6LCebR/7UZ67tYz3p6xzAOVgYsYcxoIUuEZXjHQtsYfTZZhrjUWB</span><br><span class="line">J09jrMvlKUHLnS437SLbgoXVYZmcqwAWpVNOLZf+fFm4IE5aGBG5Dho2CZ6ujngW</span><br><span class="line">9Zkn98T1d4N0MEwwXa2V6T1ijzcqD7GApZUAEQEAAYkCPAQYAQgAJhYhBLykNBfD</span><br><span class="line">tIXdEo7G1Lezt4io03hcBQJlNqzaAhsMBQkDwmcAAAoJELezt4io03hcXqMP/01a</span><br><span class="line">PT3A3Sg7oTQoHdCxj04ELkzrezNWGM+YwbSKrR2LoXR8zf2tBFzc2/Tl98V0+68f</span><br><span class="line">/eCvkvqCuOtq4392Ps23j9W3r5XG+GDOwDsx0gl0E+Qkw07pwdJctA6efsmnRkjF</span><br><span class="line">2YVO0N9MiJA1tc8NbNXpEEHJZ7F8Ri5cpQrGUz/AY0eae2b7QefyP4rpUELpMZPj</span><br><span class="line">c8Px39Fe1DzRbT+5E19TZbrpbwlSYs1iCzS5YGFmpCRyZcLKXo3zS6N22+82cnRB</span><br><span class="line">SPPipiO6WaQawcVMlQO1SX0giB+3/DryfN9VuIYd1EWCGQa3O0MVu6o5KVHwPgl9</span><br><span class="line">R1P6xPZhurkDpAd0b1s4fFxin+MdxwmG7RslZA9CXRPpzo7/fCMW8sYOH15DP+Yf</span><br><span class="line">UckoEreBt+zezBxbIX2CGGWEV9v3UBXadRtwxYQ6sN9bqW4jm1b41vNA17b6CVH6</span><br><span class="line">sVgtU3eN+5Y9an1e5jLD6kFYx+OIeqIIId/TEqwS61csY9aav4j4KLOZFCGNU0FV</span><br><span class="line">ji7NQewSpepTcJwfJDOzmtiDP4vol1ApJGLRwZZZ9PB6wsOgDOoP6sr0YrDI/NNX</span><br><span class="line">2RyXXbglnQ1yJZVSH3/3eo6knG2qTthUKHCRDNKdy9Qqc1x4WWWtSRjh+zX8AvJK</span><br><span class="line">2q1rVLH2/3ilxe9wcAZUlaj3id3TxquAlud4lWDz</span><br><span class="line">=h5nH</span><br><span class="line">-----END PGP PUBLIC KEY BLOCK-----</span><br></pre></td></tr></table></figure><h2 id="使用yum下载安装MySQL8-0"><a href="#使用yum下载安装MySQL8-0" class="headerlink" title="使用yum下载安装MySQL8.0"></a>使用yum下载安装MySQL8.0</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y mysql-community-server</span><br></pre></td></tr></table></figure><h1 id="配置MySQL"><a href="#配置MySQL" class="headerlink" title="配置MySQL"></a>配置MySQL</h1><h2 id="修改root的权限和密码"><a href="#修改root的权限和密码" class="headerlink" title="修改root的权限和密码"></a>修改root的权限和密码</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//进入vi编辑器</span><br><span class="line">vi /etc/my.cnf</span><br><span class="line">//在[mysqld]下面加入配置</span><br><span class="line">skip-grant-tables</span><br></pre></td></tr></table></figure><h2 id="用root进入MySQL"><a href="#用root进入MySQL" class="headerlink" title="用root进入MySQL"></a>用root进入MySQL</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root</span><br></pre></td></tr></table></figure><h2 id="将root密码置空"><a href="#将root密码置空" class="headerlink" title="将root密码置空"></a>将root密码置空</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">update user SET authentication_string=&#x27;&#x27; WHERE user = &#x27;root&#x27;;</span><br></pre></td></tr></table></figure><h2 id="退出MySQL登录，将跳过权限验证选项skip-grant-tables去掉"><a href="#退出MySQL登录，将跳过权限验证选项skip-grant-tables去掉" class="headerlink" title="退出MySQL登录，将跳过权限验证选项skip-grant-tables去掉"></a>退出MySQL登录，将跳过权限验证选项skip-grant-tables去掉</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/my.cnf</span><br></pre></td></tr></table></figure><h2 id="重启mysqld"><a href="#重启mysqld" class="headerlink" title="重启mysqld"></a>重启mysqld</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart mysqld</span><br></pre></td></tr></table></figure><h2 id="重新登录mysql"><a href="#重新登录mysql" class="headerlink" title="重新登录mysql"></a>重新登录mysql</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root</span><br></pre></td></tr></table></figure><h2 id="将MySQL密码改为123456"><a href="#将MySQL密码改为123456" class="headerlink" title="将MySQL密码改为123456"></a>将MySQL密码改为123456</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">//修改root密码</span><br><span class="line">alter user &#x27;root&#x27;@&#x27;localhost&#x27; identified by &#x27;Zxc@12345678&#x27;;</span><br><span class="line">//修改密码长度</span><br><span class="line">set global validate_password.length=6;</span><br><span class="line">//修改密码等级</span><br><span class="line">set global validate_password.policy=LOW;</span><br><span class="line">//再次修改root密码</span><br><span class="line">alter user &#x27;root&#x27;@&#x27;localhost&#x27; identified by &#x27;123456&#x27;;</span><br><span class="line">//刷新权限</span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure><h2 id="手动修改root用户的访问范围"><a href="#手动修改root用户的访问范围" class="headerlink" title="手动修改root用户的访问范围"></a>手动修改root用户的访问范围</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">use mysql;</span><br><span class="line">select host,user from user;</span><br><span class="line">update user set host = &#x27;%&#x27; where host = &#x27;localhost&#x27; and user = &#x27;root&#x27;;</span><br></pre></td></tr></table></figure><div class="note success simple"><p>本文未经允许禁止转载,可提供参考，如需源码请移至关于页。  </p></div>  <div class="note warning simple"><p>本文作者：Acknowledging<br>原文地址：<a href="https://qjwbkk.top">https://qjwbkk.top</a>  </p></div>  ]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2024/06/24/hello-world/"/>
      <url>/2024/06/24/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
  
  
    
    
    <entry>
      <title>分类</title>
      <link href="/categories/index.html"/>
      <url>/categories/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>友链</title>
      <link href="/link/index.html"/>
      <url>/link/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>电影</title>
      <link href="/movies/index.html"/>
      <url>/movies/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>便签</title>
      <link href="/tags/index.html"/>
      <url>/tags/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>关于</title>
      <link href="/about/index.html"/>
      <url>/about/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>音乐馆</title>
      <link href="/music/index.html"/>
      <url>/music/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
  
</search>
